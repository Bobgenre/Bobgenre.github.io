<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GGST - Admin Database Tool (STRICT CLEANING)</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- FIREBASE COMPAT -->
    <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore-compat.js"></script>

    <style>
        body { background-color: #0B1120; color: white; font-family: sans-serif; }
        .log-entry { font-family: monospace; font-size: 0.9em; border-bottom: 1px solid #333; padding: 4px 0; }
        .success { color: #4ade80; }
        .error { color: #f87171; }
        .info { color: #60a5fa; }
    </style>
</head>
<body class="flex items-center justify-center min-h-screen p-4">

    <div class="w-full max-w-4xl bg-gray-800 rounded-xl shadow-2xl overflow-hidden border border-gray-700">
        
        <div class="bg-gray-900 p-6 border-b border-gray-700 flex justify-between items-center">
            <div>
                <h1 class="text-2xl font-bold text-orange-500">GGST Database: STRICT CLEAN</h1>
                <p class="text-gray-400 text-sm">Nettoyage des Traits Secondaires</p>
            </div>
            <div id="user-status" class="text-sm text-gray-500">Chargement...</div>
        </div>

        <div id="login-section" class="p-8 hidden">
            <h2 class="text-xl mb-4 font-semibold text-center">Authentification Admin</h2>
            <form id="login-form" class="space-y-4 max-w-md mx-auto">
                <input type="email" id="email" placeholder="Email admin" class="w-full bg-gray-700 border border-gray-600 rounded p-3 text-white focus:outline-none focus:border-orange-500">
                <input type="password" id="password" placeholder="Mot de passe" class="w-full bg-gray-700 border border-gray-600 rounded p-3 text-white focus:outline-none focus:border-orange-500">
                <button type="submit" class="w-full bg-orange-600 hover:bg-orange-700 text-white font-bold py-3 rounded transition shadow-lg shadow-orange-900/50">Se connecter</button>
            </form>
        </div>

        <div id="action-section" class="hidden p-8">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="col-span-2">
                    <h3 class="text-lg font-semibold mb-2 text-white">Réécriture Assainie</h3>
                    <p class="text-gray-400 text-sm mb-4 leading-relaxed">
                        Ce script remplace toutes les données.
                        <br><strong>Correctif appliqué :</strong> Aucun personnage n'a un Archétype Principal (ex: Power, Technical) listé dans ses Traits Secondaires.
                    </p>
                    <button id="import-chars-btn" class="relative w-full bg-gradient-to-r from-red-600 to-orange-600 hover:from-red-500 hover:to-orange-500 text-white font-bold py-4 px-6 rounded-lg shadow-lg flex items-center justify-center gap-3 transition transform active:scale-95">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="17 8 12 3 7 8"/><line x1="12" y1="3" x2="12" y2="15"/></svg>
                        <span>Lancer le Remplacement Total</span>
                    </button>
                </div>
                <div class="bg-gray-900 rounded-lg p-4 border border-gray-700 flex flex-col justify-center items-center">
                    <div class="text-4xl font-bold text-white mb-1">32</div>
                    <div class="text-xs text-gray-500 uppercase tracking-widest">Personnages</div>
                    <div class="w-full h-px bg-gray-700 my-3"></div>
                    <div class="text-2xl font-bold text-green-400">100%</div>
                    <div class="text-xs text-gray-500 uppercase tracking-widest">Propre</div>
                </div>
            </div>

            <div class="bg-black rounded-lg p-4 h-80 overflow-y-auto border border-gray-700 font-mono text-xs shadow-inner" id="console-output">
                <div class="text-gray-600">> Système prêt.</div>
            </div>
        </div>
    </div>

    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyBKR5xMIcH89Pn5ktjtepRGQNWe6Dd_PsU",
            authDomain: "muscu-5e40c.firebaseapp.com",
            projectId: "muscu-5e40c",
            storageBucket: "muscu-5e40c.appspot.com",
            messagingSenderId: "561788112947",
            appId: "1:561788112947:web:7f2b7c7d74ff328f2b1346"
        };

        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.firestore();

        // --- DATASET COMPLET FINAL ET ASSAINI ---
        // Règle : Type = Array(1). Secondary = Array(N) SANS inclure de valeurs de Type.
        
        const charactersData = [
            { 
                name: "Sol Badguy", type: ["All-Rounder"], secondary_type: ["Brawler"], input_style: ["Motion", "OD_Complexe"], difficulty: 2, 
                image: "https://www.guiltygear.com/ggst/en/wordpress/wp-content/uploads/2020/09/archive.jpg", desc: "Le protagoniste. Frappe fort, facile à prendre en main.",
                moves: [
                    { name: "Gun Flame", input: ["2", "3", "6", "P"], type: "Special" },
                    { name: "Gun Flame (Feint)", input: ["2", "1", "4", "P"], type: "Special" },
                    { name: "Volcanic Viper", input: ["6", "2", "3", "S", "/", "HS"], type: "Special" },
                    { name: "Bandit Revolver", input: ["2", "3", "6", "K"], type: "Special" },
                    { name: "Bandit Bringer", input: ["2", "3", "6", "K"], hold: true, type: "Special" },
                    { name: "Wild Throw", input: ["6", "2", "3", "K"], type: "Special" },
                    { name: "Night Raid Vortex", input: ["2", "1", "4", "S"], type: "Special" },
                    { name: "Fafnir", input: ["4", "1", "2", "3", "6", "HS"], type: "Special" },
                    { name: "Tyrant Rave", input: ["6", "3", "2", "1", "4", "6", "HS"], type: "Overdrive" },
                    { name: "Heavy Mob Cemetery", input: ["2", "1", "4", "2", "1", "4", "HS"], type: "Overdrive" }
                ]
            },
            { 
                name: "Ky Kiske", type: ["All-Rounder"], secondary_type: ["Mid-Range"], input_style: ["Motion", "OD_Facile"], difficulty: 1, 
                image: "https://www.guiltygear.com/ggst/en/wordpress/wp-content/uploads/2020/09/archive_kyk.jpg", desc: "L'all-rounder par excellence. Excellente portée et projectiles.",
                moves: [
                    { name: "Stun Edge", input: ["2", "3", "6", "S"], type: "Special" },
                    { name: "Charged Stun Edge", input: ["2", "3", "6", "HS"], type: "Special" },
                    { name: "Aerial Stun Edge", input: ["j.2", "3", "6", "S", "/", "HS"], type: "Special" },
                    { name: "Stun Dipper", input: ["2", "3", "6", "K"], type: "Special" },
                    { name: "Vapor Thrust", input: ["6", "2", "3", "S", "/", "HS"], type: "Special" },
                    { name: "Foudre Arc", input: ["2", "1", "4", "K"], type: "Special" },
                    { name: "Dire Eclat", input: ["2", "1", "4", "S"], type: "Special" },
                    { name: "Ride the Lightning", input: ["6", "3", "2", "1", "4", "6", "HS"], type: "Overdrive" },
                    { name: "Sacred Edge", input: ["2", "3", "6", "2", "3", "6", "P"], type: "Overdrive" },
                    { name: "Dragon Install", input: ["2", "1", "4", "2", "1", "4", "HS"], type: "Overdrive" }
                ]
            },
            {
                name: "May", type: ["Power"], secondary_type: ["Charge"], input_style: ["Charge", "OD_Facile"], difficulty: 1, 
                image: "https://www.guiltygear.com/ggst/en/wordpress/wp-content/uploads/2020/09/archive_may-1.jpg", desc: "Dégâts explosifs avec ses dauphins. Simple et effrayante.",
                moves: [
                    { name: "Mr. Dolphin (Horizontal)", input: ["4", "hold", "6", "S", "/", "HS"], type: "Special" },
                    { name: "Mr. Dolphin (Vertical)", input: ["2", "hold", "8", "S", "/", "HS"], type: "Special" },
                    { name: "Overhead Kiss", input: ["6", "2", "3", "K"], type: "Special" },
                    { name: "Arisugawa Sparkle", input: ["2", "1", "4", "P", "/", "K"], type: "Special" },
                    { name: "Great Yamada Attack", input: ["2", "3", "6", "2", "3", "6", "S"], type: "Overdrive" },
                    { name: "The Wonderful & Dynamic Goshogawara", input: ["6", "3", "2", "1", "4", "6", "HS"], type: "Overdrive" }
                ]
            },
            {
                name: "Axl Low", type: ["Zoner"], secondary_type: ["Unique"], input_style: ["Charge", "OD_Facile"], difficulty: 4, 
                image: "https://www.guiltygear.com/ggst/en/wordpress/wp-content/uploads/2020/09/archive_axl.jpg", desc: "Le maître du combat à distance. Gardez l'ennemi loin.",
                moves: [
                    { name: "Sickle Flash", input: ["4", "hold", "6", "S"], type: "Special" },
                    { name: "Soaring Chain Strike", input: ["8"], type: "Follow-up" },
                    { name: "Spinning Chain Strike", input: ["2"], type: "Follow-up" },
                    { name: "Winter Cherry", input: ["S"], type: "Follow-up" },
                    { name: "Rainwater", input: ["2", "1", "4", "S"], type: "Special" },
                    { name: "Snail", input: ["2", "1", "4", "HS"], type: "Special" },
                    { name: "Winter Mantis", input: ["4", "1", "2", "3", "6", "HS"], type: "Special" },
                    { name: "Axl Bomber", input: ["j.2", "3", "6", "HS"], type: "Special" },
                    { name: "Whistling Wind", input: ["2", "1", "4", "K"], type: "Special" },
                    { name: "One Vision", input: ["6", "3", "2", "1", "4", "6", "P"], type: "Overdrive" },
                    { name: "Sickle Storm", input: ["2", "3", "6", "2", "3", "6", "HS"], type: "Overdrive" }
                ]
            },
            {
                name: "Chipp Zanuff", type: ["Rushdown"], secondary_type: ["Speed", "Mix-up"], input_style: ["Rekka", "OD_Facile"], difficulty: 4, 
                image: "https://www.guiltygear.com/ggst/en/wordpress/wp-content/uploads/2020/09/archive_chp.jpg", desc: "Le ninja ultra rapide. Très fragile mais invisible.",
                moves: [
                    { name: "Alpha Blade (Horizontal)", input: ["2", "3", "6", "P"], type: "Special" },
                    { name: "Alpha Blade (Diagonal)", input: ["2", "3", "6", "K"], type: "Special" },
                    { name: "Beta Blade", input: ["6", "2", "3", "S"], type: "Special" },
                    { name: "Gamma Blade", input: ["2", "3", "6", "HS"], type: "Special" },
                    { name: "Resshou (Start)", input: ["2", "3", "6", "S"], type: "Special" },
                    { name: "Rokusai (Low)", input: ["2", "3", "6", "S"], type: "Follow-up" },
                    { name: "Senshuu (Overhead)", input: ["2", "3", "6", "K"], type: "Follow-up" },
                    { name: "Genrou Zan", input: ["6", "3", "2", "1", "4", "6", "K"], type: "Special" },
                    { name: "Zansei Rouga", input: ["6", "3", "2", "1", "4", "6", "HS"], type: "Overdrive" },
                    { name: "Banki Messai", input: ["2", "3", "6", "2", "3", "6", "K"], type: "Overdrive" }
                ]
            },
            {
                name: "Potemkin", type: ["Grappler"], secondary_type: ["Brawler"], input_style: ["Charge", "OD_Complexe"], difficulty: 3, 
                image: "https://www.guiltygear.com/ggst/en/wordpress/wp-content/uploads/2020/09/archive_pot.jpg", desc: "Un colosse lent. S'il vous attrape, c'est fini.",
                moves: [
                    { name: "Potemkin Buster", input: ["6", "3", "2", "1", "4", "6", "P"], type: "Special" },
                    { name: "Heat Knuckle", input: ["6", "2", "3", "HS"], type: "Special" },
                    { name: "Mega Fist (Forward)", input: ["2", "3", "6", "P"], type: "Special" },
                    { name: "Mega Fist (Backward)", input: ["2", "1", "4", "P"], type: "Special" },
                    { name: "Slide Head", input: ["2", "3", "6", "S"], type: "Special" },
                    { name: "Hammer Fall", input: ["4", "hold", "6", "HS"], type: "Special" },
                    { name: "Hammer Fall Break", input: ["P"], type: "Follow-up" },
                    { name: "F.D.B.", input: ["2", "1", "4", "K"], type: "Special" },
                    { name: "Heat Tackle", input: ["6", "2", "3", "K"], type: "Special" },
                    { name: "Garuda Impact", input: ["2", "1", "4", "HS"], type: "Special" },
                    { name: "Heavenly Potemkin Buster", input: ["6", "3", "2", "1", "4", "6", "S"], type: "Overdrive" },
                    { name: "Giganter Kai", input: ["6", "3", "2", "1", "4", "6", "HS"], type: "Overdrive" }
                ]
            },
            {
                name: "Faust", type: ["Technical"], secondary_type: ["Unique", "Mid-Range"], input_style: ["Motion", "OD_Facile"], difficulty: 4, 
                image: "https://www.guiltygear.com/ggst/en/wordpress/wp-content/uploads/2020/09/archive_fau.jpg", desc: "Imprévisible grâce à ses objets aléatoires.",
                moves: [
                    { name: "What Could This Be?", input: ["2", "3", "6", "P"], type: "Special" },
                    { name: "Mix Mix Mix", input: ["2", "3", "6", "S"], type: "Special" },
                    { name: "Snip Snip Snip", input: ["2", "3", "6", "HS"], type: "Special" },
                    { name: "Thrust", input: ["4", "1", "2", "3", "6", "K"], type: "Special" },
                    { name: "Love", input: ["j.2", "3", "6", "P"], type: "Special" },
                    { name: "Hole In One!", input: ["2", "1", "4", "HS"], type: "Special" },
                    { name: "Scarecrow", input: ["2", "1", "4", "S", "/", "K", "/", "P"], type: "Special" },
                    { name: "Bone-crushing Excitement", input: ["6", "3", "2", "1", "4", "6", "HS"], type: "Overdrive" },
                    { name: "W-W-What Could This Be?", input: ["2", "3", "6", "2", "3", "6", "P"], type: "Overdrive" },
                    { name: "W-W-W-W-W-W-W-W-W-What Could This Be?", input: ["2", "3", "6", "2", "3", "6", "2", "3", "6", "P"], type: "Overdrive" }
                ]
            },
            {
                name: "Millia Rage", type: ["Rushdown"], secondary_type: ["Mix-up", "Speed"], input_style: ["Motion", "OD_Complexe"], difficulty: 4, 
                image: "https://www.guiltygear.com/ggst/en/wordpress/wp-content/uploads/2020/09/archive_mll.jpg", desc: "Reine du mix-up aérien. Laisse l'adversaire deviner.",
                moves: [
                    { name: "Tandem Top", input: ["2", "3", "6", "S", "/", "HS"], type: "Special" },
                    { name: "Iron Savior", input: ["2", "1", "4", "P"], type: "Special" },
                    { name: "Mirazh", input: ["2", "1", "4", "K"], type: "Special" },
                    { name: "Lust Shaker", input: ["2", "1", "4", "S"], type: "Special" },
                    { name: "Bad Moon", input: ["j.2", "3", "6", "P"], type: "Special" },
                    { name: "Turbo Fall", input: ["j.2", "3", "6", "K"], type: "Special" },
                    { name: "Artemis", input: ["2", "1", "4", "HS"], type: "Special" },
                    { name: "Kapel", input: ["j.2", "3", "6", "HS"], type: "Special" },
                    { name: "Winger", input: ["6", "3", "2", "1", "4", "6", "HS"], type: "Overdrive" },
                    { name: "Septem Voices", input: ["2", "3", "6", "2", "3", "6", "S"], type: "Overdrive" }
                ]
            },
            {
                name: "Zato-1", type: ["Technical"], secondary_type: ["Puppet"], input_style: ["Negative Edge", "OD_Complexe"], difficulty: 5, 
                image: "https://www.guiltygear.com/ggst/en/wordpress/wp-content/uploads/2020/09/archive_zat.jpg", desc: "Contrôle deux entités à la fois (lui et l'ombre Eddie).",
                moves: [
                    { name: "Summon Eddie", input: ["2", "1", "4", "HS"], type: "Special" },
                    { name: "That's A Lot!", input: ["2", "3", "6", "K"], type: "Special" },
                    { name: "Leap", input: ["2", "3", "6", "S"], type: "Special" },
                    { name: "Oppose", input: ["2", "3", "6", "HS"], type: "Special" },
                    { name: "Invite Hell", input: ["2", "2", "HS"], type: "Special" },
                    { name: "Break The Law", input: ["2", "1", "4", "K"], type: "Special" },
                    { name: "Eddie Teleport", input: ["2", "2"], type: "Special" },
                    { name: "Damned Fang", input: ["6", "2", "3", "S"], type: "Special" },
                    { name: "Drunkard Shade", input: ["2", "1", "4", "S"], type: "Special" },
                    { name: "Float", input: ["2", "1", "4", "P"], type: "Special" },
                    { name: "Amorphous", input: ["6", "3", "2", "1", "4", "6", "HS"], type: "Overdrive" },
                    { name: "Sun Void", input: ["6", "3", "2", "1", "4", "6", "S"], type: "Overdrive" }
                ]
            },
            {
                name: "Ramlethal", type: ["Power"], secondary_type: ["Mid-Range"], input_style: ["Motion", "OD_Complexe"], difficulty: 2, 
                image: "https://www.guiltygear.com/ggst/en/wordpress/wp-content/uploads/2020/09/archive_ram-1.jpg", desc: "Domine le coin avec ses épées géantes.",
                moves: [
                    { name: "Bajoneto", input: ["2", "3", "6", "S", "/", "HS"], type: "Special" },
                    { name: "Dauro", input: ["6", "2", "3", "P"], type: "Special" },
                    { name: "Sildo Detruo", input: ["2", "1", "4", "K"], type: "Special" },
                    { name: "Sabrobato", input: ["2", "1", "4", "HS"], type: "Special" },
                    { name: "Ondo", input: ["2", "3", "6", "K"], type: "Special" },
                    { name: "Agresa Ordono", input: ["j.2", "1", "4", "S"], type: "Special" },
                    { name: "Erarlumo (Start)", input: ["2", "1", "4", "P"], type: "Special" },
                    { name: "Erarlumo (2)", input: ["4", "P"], type: "Follow-up" },
                    { name: "Erarlumo (Finish)", input: ["4", "P"], type: "Follow-up" },
                    { name: "Calvados", input: ["6", "3", "2", "1", "4", "6", "HS"], type: "Overdrive" },
                    { name: "Mortobato", input: ["2", "3", "6", "2", "3", "6", "S"], type: "Overdrive" }
                ]
            },
            {
                name: "Leo Whitefang", type: ["All-Rounder"], secondary_type: ["Stance", "Mix-up"], input_style: ["Charge", "Stance", "OD_Complexe"], difficulty: 2, 
                image: "https://www.guiltygear.com/ggst/en/wordpress/wp-content/uploads/2020/09/archive_leo.jpg", desc: "Un gorille en armure. Excelle au corps à corps.",
                moves: [
                    { name: "Zweites Kaltes Gestöber", input: ["2", "3", "6", "HS"], type: "Special" },
                    { name: "Eisen Sturm", input: ["2", "hold", "8", "S", "/", "HS"], type: "Special" },
                    { name: "Erstes Kaltes Gestober", input: ["2", "3", "6", "S"], type: "Special" },
                    { name: "Turbulenz", input: ["2", "1", "4", "S"], type: "Special" },
                    { name: "Brynhildr Stance", input: ["2", "2", "HS"], type: "Special" },
                    { name: "Glänzendes Dunkel", input: ["2", "1", "4", "K"], type: "Special" },
                    { name: "Blitzschlag", input: ["2", "1", "4", "HS"], type: "Special" },
                    { name: "Stahlwirbel", input: ["6", "3", "2", "1", "4", "6", "S"], type: "Overdrive" },
                    { name: "Leidenschaft des Dirigenten", input: ["6", "3", "2", "1", "4", "6", "HS"], type: "Overdrive" }
                ]
            },
            {
                name: "Nagoriyuki", type: ["Power"], secondary_type: ["Mid-Range", "One Shot"], input_style: ["Motion", "OD_Complexe"], difficulty: 4, 
                image: "https://www.guiltygear.com/ggst/en/wordpress/wp-content/uploads/2020/09/archive_nag.jpg", desc: "Vampire samouraï. Gestion de la jauge de sang cruciale.",
                moves: [
                    { name: "Zarameyuki", input: ["2", "3", "6", "S"], type: "Special" },
                    { name: "Kamuriyuki", input: ["2", "1", "4", "HS"], type: "Special" },
                    { name: "Shizuriyuki", input: ["6", "2", "3", "HS"], type: "Special" },
                    { name: "Bloodsucking Universe", input: ["6", "2", "3", "P"], type: "Special" },
                    { name: "Fukyo", input: ["2", "1", "4", "K", "/", "2", "3", "6", "K"], type: "Special" },
                    { name: "Wasureyuki", input: ["6", "3", "2", "1", "4", "6", "S"], type: "Overdrive" },
                    { name: "Zansetsu", input: ["6", "3", "2", "1", "4", "6", "HS"], type: "Overdrive" }
                ]
            },
            {
                name: "Giovanna", type: ["Rushdown"], secondary_type: ["Brawler"], input_style: ["Motion", "OD_Complexe"], difficulty: 1, 
                image: "https://www.guiltygear.com/ggst/en/wordpress/wp-content/uploads/2020/09/archive_gio.jpg", desc: "Facile, rapide et offensive. Idéale pour débuter.",
                moves: [
                    { name: "Sepultura", input: ["2", "1", "4", "K"], type: "Special" },
                    { name: "Trovao", input: ["2", "3", "6", "K"], type: "Special" },
                    { name: "Sol Nascente", input: ["6", "2", "3", "S"], type: "Special" },
                    { name: "Sol Poente", input: ["2", "1", "4", "S"], type: "Special" },
                    { name: "Chave", input: ["2", "1", "4", "HS"], type: "Special" },
                    { name: "Ventania", input: ["6", "3", "2", "1", "4", "6", "HS"], type: "Overdrive" },
                    { name: "Tempestade", input: ["j.2", "3", "6", "2", "3", "6", "HS"], type: "Overdrive" }
                ]
            },
            {
                name: "Anji Mito", type: ["All-Rounder"], secondary_type: ["Mix-up", "Parry"], input_style: ["Rekka", "OD_Complexe"], difficulty: 3, 
                image: "https://www.guiltygear.com/ggst/en/wordpress/wp-content/uploads/2021/03/anji-306x305.jpg", desc: "Utilise des danses pour parer et contre-attaquer.",
                moves: [
                    { name: "Suigetsu No Hakobi", input: ["2", "3", "6", "K"], type: "Special" },
                    { name: "Fuujin (Start)", input: ["2", "3", "6", "HS"], type: "Special" },
                    { name: "Nagiha (Low)", input: ["S"], type: "Follow-up" },
                    { name: "Issokutobi (Hop)", input: ["K"], type: "Follow-up" },
                    { name: "Rin (Overhead)", input: ["HS"], type: "Follow-up" },
                    { name: "Shin: Ichishiki (Projectile)", input: ["P"], type: "Follow-up" },
                    { name: "Kou", input: ["2", "3", "6", "S"], type: "Special" },
                    { name: "Shitsu", input: ["2", "3", "6", "P"], type: "Special" },
                    { name: "Issei Ougi: Sai", input: ["6", "3", "2", "1", "4", "6", "HS"], type: "Overdrive" },
                    { name: "Kachoufuugetsu Kai", input: ["6", "3", "2", "1", "4", "6", "S"], type: "Overdrive" }
                ]
            },
            {
                name: "I-No", type: ["Rushdown"], secondary_type: ["Mix-up"], input_style: ["Motion", "OD_Complexe"], difficulty: 3, 
                image: "https://www.guiltygear.com/ggst/en/wordpress/wp-content/uploads/2021/03/rxx82us-1-306x305.jpg", desc: "Mix-up constant grâce à son dash aérien unique.",
                moves: [
                    { name: "Antidepressant Scale", input: ["2", "1", "4", "P"], type: "Special" },
                    { name: "Stroke the Big Tree", input: ["2", "3", "6", "S", "/", "HS"], type: "Special" },
                    { name: "Sultry Performance", input: ["j.2", "3", "6", "K", "/", "S", "/", "HS"], type: "Special" },
                    { name: "Mad Love Agitato", input: ["2", "1", "4", "S"], type: "Special" },
                    { name: "Chemical Love", input: ["2", "1", "4", "K"], type: "Special" },
                    { name: "Megalomania", input: ["6", "3", "2", "1", "4", "6", "HS"], type: "Overdrive" },
                    { name: "Ultimate Fortissimo", input: ["6", "3", "2", "1", "4", "6", "S"], type: "Overdrive" }
                ]
            },
            // DLC CHARACTERS
            {
                name: "Goldlewis", type: ["Power"], secondary_type: ["Unique"], input_style: ["Motion", "OD_Facile"], difficulty: 3, 
                image: "https://www.guiltygear.com/ggst/en/wordpress/wp-content/uploads/2021/07/gol-306x305.jpg", desc: "Dégâts massifs avec son cercueil. Behemoth Typhoon !",
                moves: [
                    { name: "Behemoth Typhoon", input: ["(Half Circle)", "HS"], type: "Special" },
                    { name: "Thunderbird", input: ["2", "1", "4", "S"], type: "Special" },
                    { name: "Skyfish", input: ["2", "3", "6", "S"], type: "Special" },
                    { name: "Burn It Down", input: ["2", "3", "6", "2", "3", "6", "K"], type: "Overdrive" },
                    { name: "Down With The System", input: ["6", "3", "2", "1", "4", "6", "P", "/", "720", "P", "/", "1080", "P"], type: "Overdrive" }
                ]
            },
            {
                name: "Jack-O'", type: ["Technical"], secondary_type: ["Puppet"], input_style: ["Negative Edge", "OD_Complexe"], difficulty: 5, 
                image: "https://www.guiltygear.com/ggst/en/wordpress/wp-content/uploads/2021/08/jko.jpg", desc: "Invoque des serviteurs pour contrôler le terrain.",
                moves: [
                    { name: "Summon Servant", input: ["2", "3", "6", "P"], type: "Special" },
                    { name: "Pick Up Servant", input: ["2", "P"], type: "Special" },
                    { name: "Throw Servant", input: ["6", "P", "/", "6", "K", "/", "6", "S", "/", "6", "HS", "/", "6", "D"], type: "Special" },
                    { name: "Recover Servant", input: ["2", "1", "4", "P"], type: "Special" },
                    { name: "Attack Command", input: ["2", "1", "4", "K"], type: "Special" },
                    { name: "Defend Command", input: ["2", "1", "4", "S"], type: "Special" },
                    { name: "Countdown", input: ["2", "1", "4", "HS"], type: "Special" },
                    { name: "Servant Shoot", input: ["2", "3", "6", "K"], type: "Special" },
                    { name: "Forever Elysion Driver", input: ["6", "3", "2", "1", "4", "6", "P"], type: "Overdrive" },
                    { name: "Cheer Servant On", input: ["2", "3", "6", "2", "3", "6", "S", "/", "HS"], type: "Overdrive" }
                ]
            },
            {
                name: "Happy Chaos", type: ["Zoner"], secondary_type: ["Shooting", "Unique"], input_style: ["Negative Edge", "OD_Complexe"], difficulty: 5, 
                image: "https://www.guiltygear.com/ggst/en/wordpress/wp-content/uploads/2021/11/82nCeh3s.jpg", desc: "Utilise un pistolet pour zoner n'importe où.",
                moves: [
                    { name: "At the Ready", input: ["H", "/", "2", "3", "6", "S"], type: "Special" },
                    { name: "Steady Aim", input: ["2", "1", "4", "S"], type: "Special" },
                    { name: "Reload", input: ["2", "2", "P"], type: "Special" },
                    { name: "Focus", input: ["2", "1", "4", "P"], type: "Special" },
                    { name: "Curse", input: ["2", "3", "6", "P"], type: "Special" },
                    { name: "Scapegoat", input: ["2", "3", "6", "K"], type: "Special" },
                    { name: "Roll", input: ["2", "1", "4", "K"], type: "Special" },
                    { name: "Deus Ex Machina", input: ["6", "3", "2", "1", "4", "6", "S"], type: "Overdrive" },
                    { name: "Super Focus", input: ["2", "1", "4", "2", "1", "4", "P"], type: "Overdrive" }
                ]
            },
            {
                name: "Baiken", type: ["All-Rounder"], secondary_type: ["Parry", "Brawler"], input_style: ["Motion", "OD_Complexe"], difficulty: 2, 
                image: "https://www.guiltygear.com/ggst/en/wordpress/wp-content/uploads/2022/01/94gvos0f.jpg", desc: "Samouraï défensive avec des contres puissants.",
                moves: [
                    { name: "Tatami Gaeshi", input: ["2", "3", "6", "K"], type: "Special" },
                    { name: "Kabari (Tether)", input: ["4", "1", "2", "3", "6", "HS"], type: "Special" },
                    { name: "Kabari (Follow-up)", input: ["HS"], type: "Follow-up" },
                    { name: "Kabari (Forward)", input: ["4", "1", "2", "3", "6", "S"], type: "Special" },
                    { name: "Youzansen", input: ["j.2", "3", "6", "S"], type: "Special" },
                    { name: "Hiiragi (Parry)", input: ["2", "3", "6", "P"], type: "Special" },
                    { name: "Tsurane Sanzu-watashi", input: ["2", "3", "6", "2", "3", "6", "S"], type: "Overdrive" },
                    { name: "Kenjyu", input: ["2", "1", "4", "2", "1", "4", "P"], type: "Overdrive" }
                ]
            },
            {
                name: "Testament", type: ["Zoner"], secondary_type: ["Mid-Range"], input_style: ["Motion", "OD_Facile"], difficulty: 3, 
                image: "https://www.guiltygear.com/ggst/en/wordpress/wp-content/uploads/2022/03/icon-1ubduiak.jpg", desc: "Contrôle l'espace avec magie et faux.",
                moves: [
                    { name: "Grave Reaper", input: ["2", "3", "6", "S", "/", "HS"], type: "Special" },
                    { name: "Unholy Diver", input: ["2", "1", "4", "P"], type: "Special" },
                    { name: "Possession", input: ["2", "1", "4", "K"], type: "Special" },
                    { name: "Arbiter Sign", input: ["2", "1", "4", "S", "/", "HS"], type: "Special" },
                    { name: "Nostrovia", input: ["2", "3", "6", "2", "3", "6", "P"], type: "Overdrive" },
                    { name: "Calamity One", input: ["2", "3", "6", "2", "3", "6", "K"], type: "Overdrive" }
                ]
            },
            {
                name: "Bridget", type: ["All-Rounder"], secondary_type: ["Mix-up"], input_style: ["Motion", "OD_Complexe"], difficulty: 2, 
                image: "https://www.guiltygear.com/ggst/en/wordpress/wp-content/uploads/2022/08/38nd9nd2jd73.jpg", desc: "Longue portée et mobilité avec ses yoyos.",
                moves: [
                    { name: "Stop and Dash (Send)", input: ["2", "3", "6", "S", "/", "HS"], type: "Special" },
                    { name: "Stop and Dash (Return)", input: ["2", "1", "4", "S", "/", "HS"], type: "Special" },
                    { name: "Rolling Movement", input: ["2", "1", "4", "K"], type: "Special" },
                    { name: "Starship", input: ["6", "2", "3", "P"], type: "Special" },
                    { name: "Kick Start My Heart", input: ["2", "3", "6", "K"], type: "Special" },
                    { name: "Brake", input: ["P"], type: "Follow-up" },
                    { name: "Shoot", input: ["K"], type: "Follow-up" },
                    { name: "Roger Dive", input: ["j.2", "3", "6", "K"], type: "Special" },
                    { name: "Rock the Baby", input: ["6", "3", "2", "1", "4", "P"], type: "Special" },
                    { name: "Loop the Loop", input: ["6", "3", "2", "1", "4", "6", "S"], type: "Overdrive" },
                    { name: "Return of the Killing Machine", input: ["6", "3", "2", "1", "4", "6", "HS"], type: "Overdrive" }
                ]
            },
            {
                name: "Sin Kiske", type: ["Rushdown"], secondary_type: ["Brawler"], input_style: ["Motion", "OD_Facile"], difficulty: 2, 
                image: "https://www.guiltygear.com/ggst/en/wordpress/wp-content/uploads/2022/11/n5idg73diw3.jpg", desc: "Combos étendus, mais doit manger pour recharger.",
                moves: [
                    { name: "Beak Driver", input: ["2", "3", "6", "HS"], type: "Special" },
                    { name: "Hawk Baker", input: ["6", "2", "3", "S"], type: "Special" },
                    { name: "Hoof Stomp", input: ["2", "1", "4", "S"], type: "Special" },
                    { name: "Elk Hunt", input: ["2", "3", "6", "K"], type: "Special" },
                    { name: "Eat", input: ["2", "1", "4", "HS"], type: "Special" },
                    { name: "Ride the Lightning", input: ["6", "3", "2", "1", "4", "6", "HS"], type: "Overdrive" },
                    { name: "Tyrant Barrel", input: ["2", "3", "6", "2", "3", "6", "P"], type: "Overdrive" }
                ]
            },
            {
                name: "Bedman?", type: ["Technical"], secondary_type: ["Unique"], input_style: ["Motion", "OD_Complexe"], difficulty: 4, 
                image: "https://www.guiltygear.com/ggst/en/wordpress/wp-content/uploads/2023/03/5fve3hdwci.jpg", desc: "Lit qui se bat tout seul. Gameplay erratique.",
                moves: [
                    { name: "call 4BA", input: ["2", "3", "6", "P"], type: "Special" },
                    { name: "call 4B9", input: ["2", "3", "6", "HS"], type: "Special" },
                    { name: "call 0x$0.20", input: ["2", "1", "4", "P"], type: "Special" },
                    { name: "call 0x$1.00", input: ["2", "1", "4", "K"], type: "Special" },
                    { name: "call 13C", input: ["6", "3", "2", "1", "4", "6", "S"], type: "Overdrive" },
                    { name: "call 4CC", input: ["6", "3", "2", "1", "4", "6", "HS"], type: "Overdrive" }
                ]
            },
            {
                name: "Asuka R#", type: ["Technical"], secondary_type: ["Shooting"], input_style: ["Negative Edge", "OD_Complexe"], difficulty: 5, 
                image: "https://www.guiltygear.com/ggst/en/wordpress/wp-content/uploads/2023/05/xnNj771Auw.jpg", desc: "Le roi de la magie. Gameplay basé sur des cartes RNG.",
                moves: [
                    { name: "Chant", input: ["2", "3", "6", "P", "/", "K", "/", "S", "/", "HS"], type: "Special" },
                    { name: "Recover Mana", input: ["2", "2", "P", "/", "K", "/", "S"], type: "Special" },
                    { name: "Bookmark", input: ["2", "1", "4", "P", "/", "K", "/", "S", "/", "HS"], type: "Special" },
                    { name: "High Compression Submicron Particle Sphere", input: ["6", "3", "2", "1", "4", "6", "P", "/", "K"], type: "Overdrive" },
                    { name: "Bookmark (Full Order)", input: ["6", "3", "2", "1", "4", "6", "S"], type: "Overdrive" }
                ]
            },
            {
                name: "Johnny", type: ["Zoner"], secondary_type: ["Mid-Range"], input_style: ["Motion", "OD_Complexe"], difficulty: 4, 
                image: "https://www.guiltygear.com/ggst/en/wordpress/wp-content/uploads/2023/08/archive_4ny9b-6nvi.jpg", desc: "Maître du Iaido. Élégant et létal à mi-distance.",
                moves: [
                    { name: "Mist Finer", input: ["2", "1", "4", "P", "/", "K", "/", "S"], type: "Special" },
                    { name: "Ensenga", input: ["2", "1", "4", "HS"], type: "Special" },
                    { name: "Deal", input: ["2", "3", "6", "P", "/", "K", "/", "S"], type: "Special" },
                    { name: "Vault", input: ["2", "3", "6", "HS"], type: "Special" },
                    { name: "That's My Name", input: ["6", "3", "2", "1", "4", "6", "HS"], type: "Overdrive" },
                    { name: "Joker Trick", input: ["2", "3", "6", "2", "3", "6", "S"], type: "Overdrive" }
                ]
            },
            {
                name: "Elphelt", type: ["Rushdown"], secondary_type: ["Mix-up"], input_style: ["Rekka", "OD_Facile"], difficulty: 1, 
                image: "https://www.guiltygear.com/ggst/en/wordpress/wp-content/uploads/2023/12/4nf89dcoo3.jpg", desc: "Guns & Roses. Gameplay offensif très direct.",
                moves: [
                    { name: "Chain Lollipop (Start)", input: ["2", "3", "6", "S"], type: "Special" },
                    { name: "Up High! (Overhead)", input: ["P"], type: "Follow-up" },
                    { name: "Down Low! (Low)", input: ["K"], type: "Follow-up" },
                    { name: "Nailed It! (Finisher)", input: ["HS"], type: "Follow-up" },
                    { name: "Miss Charlotte", input: ["2", "3", "6", "S", "/", "HS"], type: "Special" },
                    { name: "Miss Charlotte (Out of Repair)", input: ["2", "1", "4", "K"], type: "Special" },
                    { name: "Bomb-Bomb Chocolat", input: ["2", "1", "4", "HS"], type: "Special" },
                    { name: "Judge Better Half", input: ["6", "3", "2", "1", "4", "6", "HS"], type: "Overdrive" },
                    { name: "Bomb-Bombnnière", input: ["2", "3", "6", "2", "3", "6", "K"], type: "Overdrive" }
                ]
            },
            {
                name: "A.B.A", type: ["Power"], secondary_type: ["Unique", "Stance"], input_style: ["Motion", "OD_Complexe"], difficulty: 3, 
                image: "https://www.guiltygear.com/ggst/en/wordpress/wp-content/uploads/2024/03/3uf9vnso76.jpg", desc: "Doit activer son mode Rage pour être efficace.",
                moves: [
                    { name: "Bonding and Dissolving", input: ["2", "1", "4", "HS"], type: "Special" },
                    { name: "Changing and Swaying", input: ["6", "3", "2", "1", "4", "P"], type: "Special" },
                    { name: "Haul and Heed", input: ["2", "1", "4", "K"], type: "Special" },
                    { name: "Intertwine and Tilt", input: ["2", "3", "6", "K"], type: "Special" },
                    { name: "Menace and Groan", input: ["2", "3", "6", "S"], type: "Special" },
                    { name: "Restriction and Constraint", input: ["6", "S"], type: "Follow-up" },
                    { name: "Frenzy and Astonishment", input: ["2", "1", "4", "S"], type: "Special" },
                    { name: "Judgment and Sentiment", input: ["6", "2", "3", "HS"], type: "Special" },
                    { name: "The Law is Key, Key is King", input: ["6", "3", "2", "1", "4", "6", "HS"], type: "Overdrive" },
                    { name: "Keeper of the Key", input: ["6", "3", "2", "1", "4", "6", "K"], type: "Overdrive" }
                ]
            },
            {
                name: "Slayer", type: ["Power"], secondary_type: ["Brawler", "Dandy"], input_style: ["Rekka", "OD_Facile"], difficulty: 2, 
                image: "https://www.guiltygear.com/ggst/en/wordpress/wp-content/uploads/2024/04/4tg8hdo2.jpg", desc: "Dandy vampire. Frappes lourdes et imprévisibles.",
                moves: [
                    { name: "Mappa Hunch", input: ["2", "3", "6", "P", "/", "K"], type: "Special" },
                    { name: "Dandy Step", input: ["2", "1", "4", "P", "/", "K"], type: "Special" },
                    { name: "Pilebunker", input: ["P"], type: "Follow-up" },
                    { name: "Bump Ahead", input: ["K"], type: "Follow-up" },
                    { name: "It's Late", input: ["S"], type: "Follow-up" },
                    { name: "Master's Hammer", input: ["HS"], type: "Follow-up" },
                    { name: "Bloodsucking Universe", input: ["6", "3", "2", "1", "4", "HS"], type: "Special" },
                    { name: "Super Mappa Hunch", input: ["6", "3", "2", "1", "4", "6", "S"], type: "Overdrive" },
                    { name: "Last Horizon", input: ["2", "3", "6", "2", "3", "6", "HS"], type: "Overdrive" }
                ]
            },
            {
                name: "Queen Dizzy", type: ["Zoner"], secondary_type: ["Unique"], input_style: ["Motion", "OD_Complexe"], difficulty: 4, 
                image: "https://www.guiltygear.com/ggst/en/wordpress/wp-content/uploads/2018/10/archive-ny040fsi2.jpg", desc: "Reine de Illyria. Contrôle le terrain avec Necro et Undine.",
                moves: [
                    { name: "I used this to catch fish", input: ["2", "3", "6", "S", "/", "HS"], type: "Special" },
                    { name: "Ice Field", input: ["6", "S", "/", "HS"], type: "Follow-up" },
                    { name: "For roasting chestnuts", input: ["2", "3", "6", "K"], type: "Special" },
                    { name: "We talked a lot together", input: ["2", "1", "4", "P", "/", "K"], type: "Special" },
                    { name: "Michael Sword", input: ["2", "1", "4", "S", "/", "HS"], type: "Special" },
                    { name: "Wings of Light", input: ["2", "2", "HS"], type: "Special" },
                    { name: "Imperial Ray", input: ["6", "3", "2", "1", "4", "6", "S"], type: "Overdrive" },
                    { name: "Gamma Ray", input: ["6", "3", "2", "1", "4", "6", "HS"], type: "Overdrive" }
                ]
            },
            {
                name: "Venom", type: ["Technical"], secondary_type: [], input_style: ["Charge", "OD_Complexe"], difficulty: 5, 
                image: "https://www.guiltygear.com/ggst/en/wordpress/wp-content/uploads/2025/03/adhfjha.jpg", desc: "L'assassin boulanger. Maître du billard magique.",
                moves: [
                    { name: "Ball Set", input: ["2", "1", "4", "P", "/", "K", "/", "S", "/", "HS"], type: "Special" },
                    { name: "Ball Set (Multiple)", input: ["4", "1", "2", "3", "6", "K"], type: "Special" },
                    { name: "QV", input: ["6", "2", "3", "P", "/", "K", "/", "S", "/", "HS"], type: "Special" },
                    { name: "Tryambaka", input: ["6", "3", "2", "1", "4", "6", "K"], type: "Special" },
                    { name: "Stinger Aim", input: ["4", "hold", "6", "S", "/", "HS"], type: "Special" },
                    { name: "Carcass Raid", input: ["2", "hold", "8", "S", "/", "HS"], type: "Special" },
                    { name: "Dark Angel", input: ["6", "3", "2", "1", "4", "6", "S"], type: "Overdrive" },
                    { name: "Navaratna Runout", input: ["6", "3", "2", "1", "4", "6", "HS"], type: "Overdrive" }
                ]
            },
            {
                name: "Lucy", type: ["Rushdown"], secondary_type: ["Speed", "Mid-Range"], input_style: ["Motion", "OD_Complexe"], difficulty: 3, 
                image: "https://www.guiltygear.com/ggst/en/common/img/character/lucy/stand.png", desc: "Invité de Cyberpunk. Hackeuse agile armée de monowires.",
                moves: [
                    { name: "Monowire Slash", input: ["2", "1", "4", "HS"], type: "Special" },
                    { name: "Quick Hack", input: ["2", "1", "4", "P"], type: "Special" },
                    { name: "Deep Dive", input: ["2", "3", "6", "K"], type: "Special" },
                    { name: "Optical Camo", input: ["2", "2", "K"], type: "Special" },
                    { name: "Cyberpsychosis", input: ["6", "3", "2", "1", "4", "6", "HS"], type: "Overdrive" },
                    { name: "Moon Moment", input: ["2", "3", "6", "2", "3", "6", "S"], type: "Overdrive" }
                ]
            },
            {
                name: "Unika", type: ["All-Rounder"], secondary_type: ["Power", "Stance"], input_style: ["Motion", "OD_Complexe"], difficulty: 3, 
                image: "https://www.guiltygear.com/ggst/en/wordpress/wp-content/uploads/2025/05/khfauiy.jpg", desc: "Protagoniste de l'anime Dual Rulers. Une mystérieuse chasseuse de Gears.",
                moves: [
                    { name: "A.M.T.G. Streak", input: ["2", "3", "6", "HS"], type: "Special" },
                    { name: "A.A.T.G. Blitz", input: ["j.2", "3", "6", "HS"], type: "Special" },
                    { name: "A.T.T.G. Penetrate", input: ["2", "3", "6", "K"], type: "Special" },
                    { name: "A.T.T.G. Top-Attack", input: ["2", "1", "4", "K"], type: "Special" },
                    { name: "A.C.T.G. Blast-Off", input: ["6", "2", "3", "S"], type: "Special" },
                    { name: "Blaze a Trail", input: ["2", "1", "4", "S"], type: "Special" },
                    { name: "Megadeath Buster", input: ["6", "3", "2", "1", "4", "6", "S"], type: "Overdrive" },
                    { name: "Weapons Free", input: ["2", "1", "4", "2", "1", "4", "HS"], type: "Overdrive" }
                ]
            }
        ];

        // --- LOGIQUE D'IMPORTATION ---
        const consoleOutput = document.getElementById('console-output');
        const loginSection = document.getElementById('login-section');
        const actionSection = document.getElementById('action-section');
        const userStatus = document.getElementById('user-status');
        const btn = document.getElementById('import-chars-btn');

        function log(message, type = 'info') {
            const el = document.createElement('div');
            el.className = `log-entry ${type}`;
            el.innerHTML = `<span class="opacity-50">${new Date().toLocaleTimeString()}</span> ${message}`;
            consoleOutput.appendChild(el);
            consoleOutput.scrollTop = consoleOutput.scrollHeight;
        }

        // Auth Listener
        auth.onAuthStateChanged((user) => {
            if (user) {
                loginSection.classList.add('hidden');
                actionSection.classList.remove('hidden');
                userStatus.innerHTML = `<span class="flex items-center gap-2 text-green-400"><span class="w-2 h-2 bg-green-500 rounded-full animate-pulse"></span> Connecté</span>`;
                log("Connexion établie.", "success");
            } else {
                loginSection.classList.remove('hidden');
                actionSection.classList.add('hidden');
                userStatus.textContent = "Non connecté";
            }
        });

        // Login
        document.getElementById('login-form').addEventListener('submit', async (e) => {
            e.preventDefault();
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            try {
                await auth.signInWithEmailAndPassword(email, password);
            } catch (error) {
                log("Erreur d'authentification: " + error.message, "error");
            }
        });

        // Import
        btn.addEventListener('click', async () => {
            if(!confirm("Dernier avertissement : Cette action va REMPLACER TOUTES les données des personnages dans la base de données. Continuer ?")) return;

            btn.disabled = true;
            btn.innerHTML = `<svg class="animate-spin -ml-1 mr-3 h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> Traitement en cours...`;
            
            log("Démarrage du processus d'importation...", "info");

            try {
                const batch = db.batch();
                const collectionRef = db.collection("ggst_characters");
                let count = 0;

                charactersData.forEach((char) => {
                    // On utilise le nom du personnage comme ID du document
                    const docRef = collectionRef.doc(char.name); 
                    batch.set(docRef, char);
                    log(`[OK] ${char.name} préparé.`, "info");
                    count++;
                });

                log("Envoi des paquets vers Firestore...", "info");
                await batch.commit();
                
                log(`SUCCÈS FINAL : ${count} personnages mis à jour.`, "success");
                
                btn.innerHTML = "Importation Terminée avec Succès";
                btn.classList.remove('from-blue-600', 'to-indigo-600');
                btn.classList.add('from-green-600', 'to-emerald-600');

            } catch (error) {
                console.error(error);
                log("ERREUR CRITIQUE : " + error.message, "error");
                
                if (error.code === 'permission-denied') {
                    alert("ERREUR PERMISSIONS : Vérifiez les règles Firestore !");
                }

                btn.disabled = false;
                btn.innerHTML = "Réessayer l'Importation";
            }
        });
    </script>
</body>
</html>